<?xml version="1.0" encoding="UTF-8"?>
<html xml:lang="en-us" lang="en-us" xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xmlns:ns="http://www.w3.org/2001/10/synthesis">
<head>
<title>The Linux Programming Interface</title>
<link rel="stylesheet" type="text/css" href="../styles/9781593272203.css"/>
</head>
<body>
<h2 class="h2" id="app04"><span epub:type="pagebreak" id="page_1417"/><strong><span class="big">D</span></strong><br/><strong>KERNEL CONFIGURATION</strong></h2>
<p class="noindenta">Many features of the Linux kernel are components that can be optionally configured. Before compiling the kernel, these components can be disabled, enabled, or, in many cases, enabled as loadable kernel modules. One reason to disable an unneeded component is to reduce the size of the kernel binary, and thus save memory, if the component is not required. Enabling a component as a loadable module means that it will be loaded into memory only if it is required at run time. This likewise can save memory.</p>
<p class="indent">Kernel configuration is done by executing one of a few different <em>make</em> commands in the root directory of the kernel source tree&#8212;for example, <em>make menuconfig</em>, which provides a <em>curses</em>-style configuration menu, or, more comfortably, <em>make xconfig</em>, which provides a graphical configuration menu. These commands produce a <span class="literal">.config</span> file in the root directory of the kernel source tree that is then used during kernel compilation. This file contains the settings of all configuration options.</p>
<p class="indent">The value of each option that is enabled is shown in the <span class="literal">.config</span> file in a line of the following form:</p>
<p class="programs">CONFIG_<span class="font1">NAME</span>=<span class="font1">value</span></p>
<p class="noindent">If an option is not set, then the file contains a line of this form:</p>
<p class="programs"># CONFIG_<span class="font1">NAME</span> is not set</p>
<div class="block">
<p class="noindent">In the <span class="literal">.config</span> file, lines beginning with a <span class="literal">#</span> character are comments.</p>
</div>
<p class="noindentb"><span epub:type="pagebreak" id="page_1418"/>Throughout this book, when we describe kernel options, we won&#8217;t describe precisely where in the <em>menuconfig</em> or <em>xconfig</em> menu the option can be found. There are a few reasons for this:</p>
<p class="bull">&#8226; The location can often be determined fairly intuitively by navigating through the menu hierarchy.</p>
<p class="bull">&#8226; The location of configuration options does change over time, as the menu hierarchy is restructured across kernel versions.</p>
<p class="bull">&#8226; If we can&#8217;t find the location of a particular option within the menu hierarchy, then both <em>make menuconfig</em> and <em>make xconfig</em> provide search facilities. For example, we can search for the string <span class="literal">CONFIG_INOTIFY</span> to find the option for configuring support for the <em>inotify</em> API.</p>
<p class="noindentt">The configuration options that were used to build the currently running kernel are viewable via the <span class="literal">/proc/config.gz</span> virtual file, a compressed file whose contents are the same as the <span class="literal">.config</span> file that was used to build the kernel. This file can be viewed using <em>zcat(1)</em> and searched using <em>zgrep(1)</em>. The <span class="literal">/proc/config.gz</span> file is itself only available if the kernel was configured with the <span class="literal">CONFIG_IKCONFIG</span> and <span class="literal">CONFIG_IKCONFIG_PROC</span> configuration options enabled.</p>
</body>
</html>
